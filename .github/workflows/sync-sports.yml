name: ë™ê¸°í™” - K-League ì§‘ì¤‘ ë™ê¸°í™”

on:
  schedule:
    # 0ì‹œ, 5ì‹œ, 12ì‹œ (KST ê¸°ì¤€ 9ì‹œ, 14ì‹œ, 21ì‹œ)
    - cron: '0 0,5,12 * * *'  # UTC ê¸°ì¤€
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  sync:
    runs-on: ubuntu-latest
    
    steps:
      - name: K-League ë™ê¸°í™”
        run: |
          echo "ğŸ”„ K-League ë™ê¸°í™” ì‹œì‘..."
          
          response=$(curl -s -w "\n%{http_code}" \
            -X GET \
            "https://exit-system.vercel.app/api/sync-sports")
          
          http_code=$(echo "$response" | tail -n1)
          body=$(echo "$response" | sed '$d')
          
          echo "HTTP Status: $http_code"
          echo "Response: $body"
          
          if [ "$http_code" -eq 200 ]; then
            echo "âœ… ë™ê¸°í™” ì„±ê³µ!"
          else
            echo "âŒ ë™ê¸°í™” ì‹¤íŒ¨!"
            exit 1
          fi
      
      - name: ê²°ê³¼ ìš”ì•½
        if: always()
        run: |
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸ“Š ë™ê¸°í™” ì™„ë£Œ ì‹œê°„: $(date '+%Y-%m-%d %H:%M:%S UTC')"
          echo "âš½ ëŒ€ìƒ: K-League 1"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
