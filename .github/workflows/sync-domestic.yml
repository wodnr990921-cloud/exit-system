name: ë™ê¸°í™” - êµ­ë‚´ ë¦¬ê·¸ (KOVO, KBL, K-League)

on:
  schedule:
    # 6ì‹œê°„ë§ˆë‹¤ ì‹¤í–‰ (0, 6, 12, 18ì‹œ KST)
    - cron: '0 */6 * * *'  # UTC ê¸°ì¤€
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  sync:
    runs-on: ubuntu-latest
    
    steps:
      - name: êµ­ë‚´ ë¦¬ê·¸ ë™ê¸°í™”
        run: |
          echo "ğŸ”„ êµ­ë‚´ ë¦¬ê·¸ ë™ê¸°í™” ì‹œì‘..."
          
          response=$(curl -s -w "\n%{http_code}" \
            -X GET \
            "https://exit-system.vercel.app/api/sync-domestic")
          
          http_code=$(echo "$response" | tail -n1)
          body=$(echo "$response" | sed '$d')
          
          echo "HTTP Status: $http_code"
          echo "Response: $body"
          
          if [ "$http_code" -eq 200 ]; then
            echo "âœ… ë™ê¸°í™” ì„±ê³µ!"
          else
            echo "âŒ ë™ê¸°í™” ì‹¤íŒ¨!"
            exit 1
          fi
      
      - name: ê²°ê³¼ ìš”ì•½
        if: always()
        run: |
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸ“Š ë™ê¸°í™” ì™„ë£Œ ì‹œê°„: $(date '+%Y-%m-%d %H:%M:%S UTC')"
          echo "ğŸ‡°ğŸ‡· ëŒ€ìƒ: KOVO, KBL, WKBL, K-League"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
