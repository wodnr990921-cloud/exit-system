name: ë™ê¸°í™” - í•´ì™¸ ë¦¬ê·¸ (The Odds API)

on:
  schedule:
    # 4ì‹œê°„ë§ˆë‹¤ ì‹¤í–‰ (0, 4, 8, 12, 16, 20ì‹œ KST)
    - cron: '0 */4 * * *'  # UTC ê¸°ì¤€
  workflow_dispatch:  # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥

jobs:
  sync:
    runs-on: ubuntu-latest
    
    steps:
      - name: ë°°ë‹¹ ë° ê²½ê¸° ê²°ê³¼ ë™ê¸°í™”
        run: |
          echo "ğŸ”„ í•´ì™¸ ë¦¬ê·¸ ë™ê¸°í™” ì‹œì‘..."
          
          response=$(curl -s -w "\n%{http_code}" \
            -X GET \
            "https://exit-system.vercel.app/api/sync-odds-api")
          
          http_code=$(echo "$response" | tail -n1)
          body=$(echo "$response" | sed '$d')
          
          echo "HTTP Status: $http_code"
          echo "Response: $body"
          
          if [ "$http_code" -eq 200 ]; then
            echo "âœ… ë™ê¸°í™” ì„±ê³µ!"
          else
            echo "âŒ ë™ê¸°í™” ì‹¤íŒ¨!"
            exit 1
          fi
      
      - name: ê²°ê³¼ ìš”ì•½
        if: always()
        run: |
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
          echo "ğŸ“Š ë™ê¸°í™” ì™„ë£Œ ì‹œê°„: $(date '+%Y-%m-%d %H:%M:%S UTC')"
          echo "ğŸŒ ëŒ€ìƒ: EPL, ë¼ë¦¬ê°€, ì„¸ë¦¬ì—A, ë¶„ë°ìŠ¤ë¦¬ê°€ ë“±"
          echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
