tomorrow_work.md

## Error Type
Build Error

## Error Message
Module not found: Can't resolve '@/components/ui/badge'

## Build Output
./src/app/dashboard/dashboard-client.tsx:16:1
Module not found: Can't resolve '@/components/ui/badge'
  14 |   TableRow,
  15 | } from "@/components/ui/table"
> 16 | import { Badge } from "@/components/ui/badge"
     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  17 | import {
  18 |   TrendingUp,
  19 |   TrendingDown,

Import map: aliased to relative './src/components/ui/badge' inside of [project]/

Import trace:
  Server Component:
    ./src/app/dashboard/dashboard-client.tsx
    ./src/app/dashboard/page.tsx

https://nextjs.org/docs/messages/module-not-found

Next.js version: 16.1.1 (Turbopack)

오류 수정


- 배팅 업무에서 스포츠 경기 일정과 결과를 포털 사이트들에서 공인된 곳에서 크롤링해와서 적용시키는 기능 추가.
- 모든 오류 수정

-디자인을 최신 유행하는 ERP 회사의 깔끔하고 모던한 디자인을 벤치마킹해서 제작해줘. 지금은 너무 밋밋하고, 버튼들의 크기들도 마음에 들지않아. 적절한 크기로 다 재배치해.

2. [수용자 관리] 수용자 DB 테이블 분리
   - 수용자별 '현재 수용 중인 교도소' 및 '출소일' 관리.
   - 교도소별 반입 금지 물품 팝업 띄우기.

3. [리스크 관리] 악성 유저(블랙리스트) 태그 기능
   - 직원 화면에서 해당 유저의 편지 처리 시 빨간색 경고 배지 노출.

4. [정산] 매입가(원가) 입력 필드 추가
   - 월말 결산 시 [매출 - 원가 - 배송비 = 순수익]이 자동으로 계산되도록 통계 페이지 강화..

1. [보안/감사] 직원 활동 로그 (Activity Logs)
   - 직원의 모든 데이터 조회(SELECT) 및 수정(UPDATE) 이력을 `audit_logs` 테이블에 자동 저장.
   - 관리자가 의심스러운 조회 내역을 추적할 수 있는 뷰 제공.

1. ↩️ "실수 되돌리기" 버튼 (Transaction Reversal)
직원이 5,000원을 차감해야 하는데 실수로 50,000원을 차감하거나, A회원에게 줄 포인트를 B회원에게 주는 일은 무조건 발생합니다.

현재 문제: DB를 직접 수정해야 하는데, 위험하고 기록이 안 남습니다.

필요 기능: 포인트 로그 내역 옆에 [취소/환불] 버튼 하나만 있으면 됩니다.

누르는 순간: "잘못 차감된 포인트 복구" + "취소된 내역 기록(빨간줄)"이 동시에 처리되어야 장부가 꼬이지 않습니다.

3. 📉 "포인트 부채 현황판" (Point Liability)
이건 대표님만 봐야 하는 재무 지표입니다. 통장에 현금이 1,000만 원 있어도, 고객들이 아직 안 쓴 포인트가 900만 원이면 실제 내 돈은 100만 원뿐입니다.

현재 문제: 통장에 돈이 많아 보이면 '매출이 좋구나' 착각하고 돈을 써버릴 수 있습니다. (흑자 부도 위험)

필요 기능: 대시보드 구석에 작게 **[예수금 현황]**을 띄워야 합니다.

총 보유 현금 vs 고객 보유 포인트 총액을 비교해서 "지금 당장 고객들이 환불해달라고 하면 줄 돈이 있는지" 보여줘야 안전합니다.

# 안정성 및 운영 관리 (Phase 3)

1. [자금 관리] 환불(출금) 승인 프로세스
   - 직원이 환불 요청 시 바로 처리되지 않고, 관리자(Admin)의 승인을 거쳐야 포인트 차감.
   - 환불 사유와 예금주 정보를 기록하여 자금 유출 통제.

2. [데이터] 장부 엑셀 다운로드 (Daily Backup)
   - 만약의 사태를 대비해 `users` 포인트 잔액과 `point_logs` 전체를 원클릭으로 엑셀(CSV) 다운로드하는 기능.
   - 매일 자정 스냅샷 저장 기능 고려.

3. [소통] 기존 공지사항 팝업 기능 추가(공지 게시시 선택가능)
   - 교도소 정책 변경이나 회사 내부 지침을 로그인 시 팝업으로 공지.
   - '다시 보지 않기' 누르기 전까지 메인 화면 상단에 고정 노출.

1. 📮 "소모품(우표/봉투) 재고 알림" (Inventory Alert)
주문은 다 받았는데, 막상 편지 부치려니까 "어? 우표가 다 떨어졌네?" 하는 순간 업무 마비됩니다. 책이나 물건은 그때그때 사면 되지만, 우표, 서류봉투, A4용지, 라벨지는 항상 쌓여 있어야 합니다.

필요 기능:

관리자 페이지 구석에 [소모품 현황] 위젯 추가.

직원이 우표 한 통(100장) 뜯을 때마다 [ -100 ] 버튼 누르게 함.

"우표 50장 남았습니다. 발주하세요!" 하고 빨간 알림 띄우기.

2. 🗑️ "물리적 원본 파기 알림" (Destruction Scheduler)
고객이 보낸 편지나 사진 원본, 사무실에 영원히 보관하실 건가요? 개인정보 보호법상 일정 기간 지나면 없애야 하고, 안 그러면 사무실이 쓰레기장 됩니다.

기능:

"보관 기간 설정" (예: 발송 후 3개월).

매일 아침 관리자 화면에 알림: "2025년 10월자 원본 서류 50건, 오늘 파기해야 합니다."

파기 후 [파기 완료] 버튼 누르면 로그 남김. (법적 방어용)

3. ↩️ "반송(Return) 처리 프로세스" (Return Logic)
편지를 보냈는데 **"수취인 불명"**이나 **"이감"**으로 교도소에서 빠꾸(반송) 먹어서 사무실로 다시 돌아오는 경우가 무조건 생깁니다. 이때 "누구 거였지?" 찾느라 시간 다 쓰고, **"반송비 누가 내냐"**로 고객이랑 싸웁니다.

기능:

[반송 등록] 메뉴: 우편 봉투에 적힌 이름만 치면 원본 주문서 뜸.

반송 사유 선택: (이감 / 출소 / 금지물품).

처리 로직:

고객에게 "반송되었습니다" 알림(문자) 자동 생성.

재발송 할지 / 폐기 할지 선택하게 함.

재발송 시 [반송 배송비 차감] 자동 적용.

1. ⚙️ "변수 설정 관리자" (Global Config Manager)
내년에 우표 가격이 오르거나, 수수료를 500원에서 600원으로 올리고 싶을 때, 그때마다 "개발자님, 이거 숫자 좀 바꿔주세요" 하고 돈 쓰실 겁니까?

기능:

관리자 페이지 깊숙한 곳에 [환경 설정] 메뉴 생성.

우표 가격, 기본 수수료, SMS 발송 문구, 계좌번호 등을 직접 수정할 수 있는 입력창.

여기서 바꾸면 사이트 전체에 즉시 반영됨. (하드코딩 제거)

2. 👻 "직원 화면 미리보기" (Impersonation / Ghost Login)
직원이 "사장님, 제 화면에서는 버튼이 안 눌려요!"라고 징징거릴 때, "비켜봐" 하고 그 자리로 갈 필요 없습니다.

기능:

직원 목록에서 [이 계정으로 로그인] 버튼 클릭.

비밀번호 몰라도 해당 직원의 시점으로 화면이 전환됨.

진짜 오류인지, 직원이 실수한 건지 1초 만에 검증 가능.

3. 🧹 "데이터 청소기" (Garbage Collector)
매일 사진 찍고 올리다 보면, 업로드하다가 취소된 **"쓰레기 파일"**이나, 연결 끊긴 **"유령 데이터"**가 서버 용량을 잡아먹습니다. 이거 놔두면 나중에 서버비 폭탄 맞습니다.

기능:

[정리 시작] 버튼 하나 만들기.

누르면: 연결 안 된 이미지 삭제, 3년 지난 로그 삭제, 임시 파일 삭제.

"서버 용량 500MB 확보했습니다" 하고 결과 리포트.

# [핵심 자동화] OCR 기반 우편물 자동 분류 및 텍스트화 (Smart Sorting)

1. **연속 촬영 및 자동 그룹핑 로직**
   - 직원이 다수의 이미지를 일괄 업로드할 때, AI(Vision API)가 각 이미지를 분석.
   - **[Trigger] 편지봉투 감지:**
     - 새로운 '수신 처리(Task)' 생성.
     - 봉투의 '발신인 성명'과 '주소'를 OCR로 추출하여 회원 DB와 자동 매칭.
   - **[Follow] 편지지(내용) 감지:**
     - 직전에 생성된 Task의 하위 이미지로 자동 병합(Append).

2. **손글씨 데이터화 (Handwriting to Text)**
   - 편지지가 감지되면 내용을 OCR로 텍스트 변환하여 `letter_content` 컬럼에 저장.
   - 직원 화면(Viewer) 우측에 변환된 텍스트를 표시하여 가독성 확보.
   - 변환된 텍스트에서 '금지어(계좌, 욕설, 은어 등)' 자동 하이라이팅 기능 추가.

   3. 💸 "낙전수입(휴면 포인트) 관리" (Dormant Points)
수용자가 출소하면 고객(가족)도 자연스럽게 이용을 끊습니다. 이때 계정에 남은 300원, 500원 같은 자투리 포인트들이 쌓이면 나중에 회사 부채가 됩니다.

기능:

휴면 계정 정책: "마지막 이용 후 1년 지나면 포인트 소멸" 자동 로직.

낙전 처리: 소멸된 포인트를 회사의 '잡수익'으로 자동 회계 처리해서 장부에서 털어내는 기능.

효과: 눈먼 돈이 쌓여서 나중에 세금 문제가 되는 걸 막고, 합법적인 부가 수익 창출.

